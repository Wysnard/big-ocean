import{c as Me,j as s,r as a,a as ke,b as Ct,d as St,u as Le,X as jt,e as Rt}from"./main-RiaZkz5G.js";import{c as Dt,u as W,B as P}from"./button-B3t8njBi.js";import{c as T}from"./utils-CDN07tui.js";import{u as Ie}from"./use-auth-DE7wvnG3.js";import{a as Pt,b as Ot}from"./use-assessment-ogEYb1AK.js";import{L as J}from"./loader-circle-BWRtFEy-.js";import"./useMutation-CSCeiqsJ.js";const Tt=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],_e=Me("chart-column",Tt);const At=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Mt=Me("send",At);function Fe({className:e,...t}){return s.jsx("div",{"data-slot":"card",className:T("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...t})}function We({className:e,...t}){return s.jsx("div",{"data-slot":"card-header",className:T("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...t})}function $e({className:e,...t}){return s.jsx("div",{"data-slot":"card-title",className:T("leading-none font-semibold",e),...t})}function Be({className:e,...t}){return s.jsx("div",{"data-slot":"card-content",className:T("px-6",e),...t})}function kt(e){if(e instanceof Error){const t=e.message;return t.includes("404")||t.includes("SessionNotFound")?{message:"Session not found. Starting a new session...",type:"session"}:t.includes("503")||t.includes("BudgetPaused")||t.includes("CostLimit")?{message:"Assessment paused — daily budget reached. You can resume tomorrow.",type:"budget"}:t.includes("429")||t.includes("RateLimit")?{message:"You've already started an assessment today. Come back tomorrow!",type:"rate-limit"}:t.includes("Failed to fetch")||t.includes("NetworkError")||t.includes("ERR_")?{message:"Connection lost. Check your internet and try again.",type:"network"}:{message:t,type:"generic"}}return{message:"Something went wrong. Please try again.",type:"generic"}}function Lt(e){const[t,n]=a.useState([]),[r,o]=a.useState({openness:0,conscientiousness:0,extraversion:0,agreeableness:0,neuroticism:0,opennessConfidence:0,conscientiousnessConfidence:0,extraversionConfidence:0,agreeablenessConfidence:0,neuroticismConfidence:0}),[i,l]=a.useState(!1),[c,f]=a.useState(null),[u,m]=a.useState(null),[h,g]=a.useState(!1),{mutate:x}=Pt(),{data:b,isLoading:d,error:p}=Ot(e);a.useEffect(()=>{if(!b)return;const S=b.messages.map((v,R)=>({id:`msg-resume-${R}`,role:v.role,content:v.content,timestamp:new Date(v.timestamp)}));S.length===0?n([{id:"msg_init",role:"assistant",content:"Hi! I'm Nerin, your AI therapist. I'd like to understand you better. Let's start with something simple: What are you currently passionate about?",timestamp:new Date(Date.now()-5e3)}]):n(S),o({openness:b.confidence.openness,conscientiousness:b.confidence.conscientiousness,extraversion:b.confidence.extraversion,agreeableness:b.confidence.agreeableness,neuroticism:b.confidence.neuroticism,opennessConfidence:b.confidence.openness,conscientiousnessConfidence:b.confidence.conscientiousness,extraversionConfidence:b.confidence.extraversion,agreeablenessConfidence:b.confidence.agreeableness,neuroticismConfidence:b.confidence.neuroticism})},[b]);const y=a.useCallback(()=>{f(null),m(null)},[]),w=a.useCallback(async S=>{!e||!S||(y(),l(!0),n(v=>[...v,{id:`msg-${Date.now()}`,role:"user",content:S,timestamp:new Date}]),x({sessionId:e,message:S},{onSuccess:v=>{n(R=>[...R,{id:`msg-${Date.now()}-response`,role:"assistant",content:v.response,timestamp:new Date}]),o({openness:v.confidence.openness,conscientiousness:v.confidence.conscientiousness,extraversion:v.confidence.extraversion,agreeableness:v.confidence.agreeableness,neuroticism:v.confidence.neuroticism,opennessConfidence:v.confidence.openness,conscientiousnessConfidence:v.confidence.conscientiousness,extraversionConfidence:v.confidence.extraversion,agreeablenessConfidence:v.confidence.agreeableness,neuroticismConfidence:v.confidence.neuroticism}),l(!1)},onError:v=>{const R=kt(v);f(R.message),m(R.type),l(!1)}}))},[e,x,y]),E=a.useCallback(()=>{const S=[...t].reverse().find(v=>v.role==="user");S&&(n(v=>v.filter(R=>R.id!==S.id)),w(S.content))},[t,w]),C=(r.openness+r.conscientiousness+r.extraversion+r.agreeableness+r.neuroticism)/5>=70;return{messages:t,traits:r,isLoading:i,isCompleted:!1,errorMessage:c,errorType:u,clearError:y,retryLastMessage:E,sendMessage:w,isResuming:d,resumeError:p,isConfidenceReady:C,hasShownCelebration:h,setHasShownCelebration:g}}function I(e,t,{checkForDefaultPrevented:n=!0}={}){return function(o){if(e?.(o),n===!1||!o.defaultPrevented)return t?.(o)}}function It(e,t){const n=a.createContext(t),r=i=>{const{children:l,...c}=i,f=a.useMemo(()=>c,Object.values(c));return s.jsx(n.Provider,{value:f,children:l})};r.displayName=e+"Provider";function o(i){const l=a.useContext(n);if(l)return l;if(t!==void 0)return t;throw new Error(`\`${i}\` must be used within \`${e}\``)}return[r,o]}function _t(e,t=[]){let n=[];function r(i,l){const c=a.createContext(l),f=n.length;n=[...n,l];const u=h=>{const{scope:g,children:x,...b}=h,d=g?.[e]?.[f]||c,p=a.useMemo(()=>b,Object.values(b));return s.jsx(d.Provider,{value:p,children:x})};u.displayName=i+"Provider";function m(h,g){const x=g?.[e]?.[f]||c,b=a.useContext(x);if(b)return b;if(l!==void 0)return l;throw new Error(`\`${h}\` must be used within \`${i}\``)}return[u,m]}const o=()=>{const i=n.map(l=>a.createContext(l));return function(c){const f=c?.[e]||i;return a.useMemo(()=>({[`__scope${e}`]:{...c,[e]:f}}),[c,f])}};return o.scopeName=e,[r,Ft(o,...t)]}function Ft(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(i){const l=r.reduce((c,{useScope:f,scopeName:u})=>{const h=f(i)[`__scope${u}`];return{...c,...h}},{});return a.useMemo(()=>({[`__scope${t.scopeName}`]:l}),[l])}};return n.scopeName=t.scopeName,n}var z=globalThis?.document?a.useLayoutEffect:()=>{},Wt=ke[" useId ".trim().toString()]||(()=>{}),$t=0;function ae(e){const[t,n]=a.useState(Wt());return z(()=>{n(r=>r??String($t++))},[e]),e||(t?`radix-${t}`:"")}var Bt=ke[" useInsertionEffect ".trim().toString()]||z;function Ut({prop:e,defaultProp:t,onChange:n=()=>{},caller:r}){const[o,i,l]=Vt({defaultProp:t,onChange:n}),c=e!==void 0,f=c?e:o;{const m=a.useRef(e!==void 0);a.useEffect(()=>{const h=m.current;h!==c&&console.warn(`${r} is changing from ${h?"controlled":"uncontrolled"} to ${c?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),m.current=c},[c,r])}const u=a.useCallback(m=>{if(c){const h=Ht(m)?m(e):m;h!==e&&l.current?.(h)}else i(m)},[c,e,i,l]);return[f,u]}function Vt({defaultProp:e,onChange:t}){const[n,r]=a.useState(e),o=a.useRef(n),i=a.useRef(t);return Bt(()=>{i.current=t},[t]),a.useEffect(()=>{o.current!==n&&(i.current?.(n),o.current=n)},[n,o]),[n,r,i]}function Ht(e){return typeof e=="function"}function Ue(e){const t=zt(e),n=a.forwardRef((r,o)=>{const{children:i,...l}=r,c=a.Children.toArray(i),f=c.find(Yt);if(f){const u=f.props.children,m=c.map(h=>h===f?a.Children.count(u)>1?a.Children.only(null):a.isValidElement(u)?u.props.children:null:h);return s.jsx(t,{...l,ref:o,children:a.isValidElement(u)?a.cloneElement(u,void 0,m):null})}return s.jsx(t,{...l,ref:o,children:i})});return n.displayName=`${e}.Slot`,n}function zt(e){const t=a.forwardRef((n,r)=>{const{children:o,...i}=n;if(a.isValidElement(o)){const l=Gt(o),c=Xt(i,o.props);return o.type!==a.Fragment&&(c.ref=r?Dt(r,l):l),a.cloneElement(o,c)}return a.Children.count(o)>1?a.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Kt=Symbol("radix.slottable");function Yt(e){return a.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===Kt}function Xt(e,t){const n={...t};for(const r in t){const o=e[r],i=t[r];/^on[A-Z]/.test(r)?o&&i?n[r]=(...c)=>{const f=i(...c);return o(...c),f}:o&&(n[r]=o):r==="style"?n[r]={...o,...i}:r==="className"&&(n[r]=[o,i].filter(Boolean).join(" "))}return{...e,...n}}function Gt(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var Zt=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],A=Zt.reduce((e,t)=>{const n=Ue(`Primitive.${t}`),r=a.forwardRef((o,i)=>{const{asChild:l,...c}=o,f=l?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),s.jsx(f,{...c,ref:i})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function qt(e,t){e&&Ct.flushSync(()=>e.dispatchEvent(t))}function K(e){const t=a.useRef(e);return a.useEffect(()=>{t.current=e}),a.useMemo(()=>(...n)=>t.current?.(...n),[])}function Qt(e,t=globalThis?.document){const n=K(e);a.useEffect(()=>{const r=o=>{o.key==="Escape"&&n(o)};return t.addEventListener("keydown",r,{capture:!0}),()=>t.removeEventListener("keydown",r,{capture:!0})},[n,t])}var Jt="DismissableLayer",he="dismissableLayer.update",en="dismissableLayer.pointerDownOutside",tn="dismissableLayer.focusOutside",ye,Ve=a.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),He=a.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:o,onFocusOutside:i,onInteractOutside:l,onDismiss:c,...f}=e,u=a.useContext(Ve),[m,h]=a.useState(null),g=m?.ownerDocument??globalThis?.document,[,x]=a.useState({}),b=W(t,v=>h(v)),d=Array.from(u.layers),[p]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),y=d.indexOf(p),w=m?d.indexOf(m):-1,E=u.layersWithOutsidePointerEventsDisabled.size>0,N=w>=y,C=sn(v=>{const R=v.target,M=[...u.branches].some(_=>_.contains(R));!N||M||(o?.(v),l?.(v),v.defaultPrevented||c?.())},g),S=on(v=>{const R=v.target;[...u.branches].some(_=>_.contains(R))||(i?.(v),l?.(v),v.defaultPrevented||c?.())},g);return Qt(v=>{w===u.layers.size-1&&(r?.(v),!v.defaultPrevented&&c&&(v.preventDefault(),c()))},g),a.useEffect(()=>{if(m)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(ye=g.body.style.pointerEvents,g.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(m)),u.layers.add(m),we(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(g.body.style.pointerEvents=ye)}},[m,g,n,u]),a.useEffect(()=>()=>{m&&(u.layers.delete(m),u.layersWithOutsidePointerEventsDisabled.delete(m),we())},[m,u]),a.useEffect(()=>{const v=()=>x({});return document.addEventListener(he,v),()=>document.removeEventListener(he,v)},[]),s.jsx(A.div,{...f,ref:b,style:{pointerEvents:E?N?"auto":"none":void 0,...e.style},onFocusCapture:I(e.onFocusCapture,S.onFocusCapture),onBlurCapture:I(e.onBlurCapture,S.onBlurCapture),onPointerDownCapture:I(e.onPointerDownCapture,C.onPointerDownCapture)})});He.displayName=Jt;var nn="DismissableLayerBranch",rn=a.forwardRef((e,t)=>{const n=a.useContext(Ve),r=a.useRef(null),o=W(t,r);return a.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),s.jsx(A.div,{...e,ref:o})});rn.displayName=nn;function sn(e,t=globalThis?.document){const n=K(e),r=a.useRef(!1),o=a.useRef(()=>{});return a.useEffect(()=>{const i=c=>{if(c.target&&!r.current){let f=function(){ze(en,n,u,{discrete:!0})};const u={originalEvent:c};c.pointerType==="touch"?(t.removeEventListener("click",o.current),o.current=f,t.addEventListener("click",o.current,{once:!0})):f()}else t.removeEventListener("click",o.current);r.current=!1},l=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(l),t.removeEventListener("pointerdown",i),t.removeEventListener("click",o.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function on(e,t=globalThis?.document){const n=K(e),r=a.useRef(!1);return a.useEffect(()=>{const o=i=>{i.target&&!r.current&&ze(tn,n,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",o),()=>t.removeEventListener("focusin",o)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function we(){const e=new CustomEvent(he);document.dispatchEvent(e)}function ze(e,t,n,{discrete:r}){const o=n.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&o.addEventListener(e,t,{once:!0}),r?qt(o,i):o.dispatchEvent(i)}var ie="focusScope.autoFocusOnMount",ce="focusScope.autoFocusOnUnmount",Ee={bubbles:!1,cancelable:!0},an="FocusScope",Ke=a.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:o,onUnmountAutoFocus:i,...l}=e,[c,f]=a.useState(null),u=K(o),m=K(i),h=a.useRef(null),g=W(t,d=>f(d)),x=a.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;a.useEffect(()=>{if(r){let d=function(E){if(x.paused||!c)return;const N=E.target;c.contains(N)?h.current=N:L(h.current,{select:!0})},p=function(E){if(x.paused||!c)return;const N=E.relatedTarget;N!==null&&(c.contains(N)||L(h.current,{select:!0}))},y=function(E){if(document.activeElement===document.body)for(const C of E)C.removedNodes.length>0&&L(c)};document.addEventListener("focusin",d),document.addEventListener("focusout",p);const w=new MutationObserver(y);return c&&w.observe(c,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",d),document.removeEventListener("focusout",p),w.disconnect()}}},[r,c,x.paused]),a.useEffect(()=>{if(c){Ce.add(x);const d=document.activeElement;if(!c.contains(d)){const y=new CustomEvent(ie,Ee);c.addEventListener(ie,u),c.dispatchEvent(y),y.defaultPrevented||(cn(mn(Ye(c)),{select:!0}),document.activeElement===d&&L(c))}return()=>{c.removeEventListener(ie,u),setTimeout(()=>{const y=new CustomEvent(ce,Ee);c.addEventListener(ce,m),c.dispatchEvent(y),y.defaultPrevented||L(d??document.body,{select:!0}),c.removeEventListener(ce,m),Ce.remove(x)},0)}}},[c,u,m,x]);const b=a.useCallback(d=>{if(!n&&!r||x.paused)return;const p=d.key==="Tab"&&!d.altKey&&!d.ctrlKey&&!d.metaKey,y=document.activeElement;if(p&&y){const w=d.currentTarget,[E,N]=ln(w);E&&N?!d.shiftKey&&y===N?(d.preventDefault(),n&&L(E,{select:!0})):d.shiftKey&&y===E&&(d.preventDefault(),n&&L(N,{select:!0})):y===w&&d.preventDefault()}},[n,r,x.paused]);return s.jsx(A.div,{tabIndex:-1,...l,ref:g,onKeyDown:b})});Ke.displayName=an;function cn(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(L(r,{select:t}),document.activeElement!==n)return}function ln(e){const t=Ye(e),n=Ne(t,e),r=Ne(t.reverse(),e);return[n,r]}function Ye(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const o=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||o?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function Ne(e,t){for(const n of e)if(!un(n,{upTo:t}))return n}function un(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function dn(e){return e instanceof HTMLInputElement&&"select"in e}function L(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&dn(e)&&t&&e.select()}}var Ce=fn();function fn(){let e=[];return{add(t){const n=e[0];t!==n&&n?.pause(),e=Se(e,t),e.unshift(t)},remove(t){e=Se(e,t),e[0]?.resume()}}}function Se(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function mn(e){return e.filter(t=>t.tagName!=="A")}var hn="Portal",Xe=a.forwardRef((e,t)=>{const{container:n,...r}=e,[o,i]=a.useState(!1);z(()=>i(!0),[]);const l=n||o&&globalThis?.document?.body;return l?St.createPortal(s.jsx(A.div,{...r,ref:t}),l):null});Xe.displayName=hn;function pn(e,t){return a.useReducer((n,r)=>t[n][r]??n,e)}var re=e=>{const{present:t,children:n}=e,r=vn(t),o=typeof n=="function"?n({present:r.isPresent}):a.Children.only(n),i=W(r.ref,gn(o));return typeof n=="function"||r.isPresent?a.cloneElement(o,{ref:i}):null};re.displayName="Presence";function vn(e){const[t,n]=a.useState(),r=a.useRef(null),o=a.useRef(e),i=a.useRef("none"),l=e?"mounted":"unmounted",[c,f]=pn(l,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return a.useEffect(()=>{const u=X(r.current);i.current=c==="mounted"?u:"none"},[c]),z(()=>{const u=r.current,m=o.current;if(m!==e){const g=i.current,x=X(u);e?f("MOUNT"):x==="none"||u?.display==="none"?f("UNMOUNT"):f(m&&g!==x?"ANIMATION_OUT":"UNMOUNT"),o.current=e}},[e,f]),z(()=>{if(t){let u;const m=t.ownerDocument.defaultView??window,h=x=>{const d=X(r.current).includes(CSS.escape(x.animationName));if(x.target===t&&d&&(f("ANIMATION_END"),!o.current)){const p=t.style.animationFillMode;t.style.animationFillMode="forwards",u=m.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=p)})}},g=x=>{x.target===t&&(i.current=X(r.current))};return t.addEventListener("animationstart",g),t.addEventListener("animationcancel",h),t.addEventListener("animationend",h),()=>{m.clearTimeout(u),t.removeEventListener("animationstart",g),t.removeEventListener("animationcancel",h),t.removeEventListener("animationend",h)}}else f("ANIMATION_END")},[t,f]),{isPresent:["mounted","unmountSuspended"].includes(c),ref:a.useCallback(u=>{r.current=u?getComputedStyle(u):null,n(u)},[])}}function X(e){return e?.animationName||"none"}function gn(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var le=0;function xn(){a.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??je()),document.body.insertAdjacentElement("beforeend",e[1]??je()),le++,()=>{le===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),le--}},[])}function je(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var O=function(){return O=Object.assign||function(t){for(var n,r=1,o=arguments.length;r<o;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},O.apply(this,arguments)};function Ge(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n}function bn(e,t,n){if(n||arguments.length===2)for(var r=0,o=t.length,i;r<o;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}var ee="right-scroll-bar-position",te="width-before-scroll-bar",yn="with-scroll-bars-hidden",wn="--removed-body-scroll-bar-size";function ue(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function En(e,t){var n=a.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var o=n.value;o!==r&&(n.value=r,n.callback(r,o))}}}})[0];return n.callback=t,n.facade}var Nn=typeof window<"u"?a.useLayoutEffect:a.useEffect,Re=new WeakMap;function Cn(e,t){var n=En(null,function(r){return e.forEach(function(o){return ue(o,r)})});return Nn(function(){var r=Re.get(n);if(r){var o=new Set(r),i=new Set(e),l=n.current;o.forEach(function(c){i.has(c)||ue(c,null)}),i.forEach(function(c){o.has(c)||ue(c,l)})}Re.set(n,e)},[e]),n}function Sn(e){return e}function jn(e,t){t===void 0&&(t=Sn);var n=[],r=!1,o={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(i){var l=t(i,r);return n.push(l),function(){n=n.filter(function(c){return c!==l})}},assignSyncMedium:function(i){for(r=!0;n.length;){var l=n;n=[],l.forEach(i)}n={push:function(c){return i(c)},filter:function(){return n}}},assignMedium:function(i){r=!0;var l=[];if(n.length){var c=n;n=[],c.forEach(i),l=n}var f=function(){var m=l;l=[],m.forEach(i)},u=function(){return Promise.resolve().then(f)};u(),n={push:function(m){l.push(m),u()},filter:function(m){return l=l.filter(m),n}}}};return o}function Rn(e){e===void 0&&(e={});var t=jn(null);return t.options=O({async:!0,ssr:!1},e),t}var Ze=function(e){var t=e.sideCar,n=Ge(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return a.createElement(r,O({},n))};Ze.isSideCarExport=!0;function Dn(e,t){return e.useMedium(t),Ze}var qe=Rn(),de=function(){},se=a.forwardRef(function(e,t){var n=a.useRef(null),r=a.useState({onScrollCapture:de,onWheelCapture:de,onTouchMoveCapture:de}),o=r[0],i=r[1],l=e.forwardProps,c=e.children,f=e.className,u=e.removeScrollBar,m=e.enabled,h=e.shards,g=e.sideCar,x=e.noRelative,b=e.noIsolation,d=e.inert,p=e.allowPinchZoom,y=e.as,w=y===void 0?"div":y,E=e.gapMode,N=Ge(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),C=g,S=Cn([n,t]),v=O(O({},N),o);return a.createElement(a.Fragment,null,m&&a.createElement(C,{sideCar:qe,removeScrollBar:u,shards:h,noRelative:x,noIsolation:b,inert:d,setCallbacks:i,allowPinchZoom:!!p,lockRef:n,gapMode:E}),l?a.cloneElement(a.Children.only(c),O(O({},v),{ref:S})):a.createElement(w,O({},v,{className:f,ref:S}),c))});se.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};se.classNames={fullWidth:te,zeroRight:ee};var Pn=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function On(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=Pn();return t&&e.setAttribute("nonce",t),e}function Tn(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function An(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var Mn=function(){var e=0,t=null;return{add:function(n){e==0&&(t=On())&&(Tn(t,n),An(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},kn=function(){var e=Mn();return function(t,n){a.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},Qe=function(){var e=kn(),t=function(n){var r=n.styles,o=n.dynamic;return e(r,o),null};return t},Ln={left:0,top:0,right:0,gap:0},fe=function(e){return parseInt(e||"",10)||0},In=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],o=t[e==="padding"?"paddingRight":"marginRight"];return[fe(n),fe(r),fe(o)]},_n=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return Ln;var t=In(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},Fn=Qe(),H="data-scroll-locked",Wn=function(e,t,n,r){var o=e.left,i=e.top,l=e.right,c=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(yn,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(c,"px ").concat(r,`;
  }
  body[`).concat(H,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(o,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(l,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(c,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(c,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(ee,` {
    right: `).concat(c,"px ").concat(r,`;
  }
  
  .`).concat(te,` {
    margin-right: `).concat(c,"px ").concat(r,`;
  }
  
  .`).concat(ee," .").concat(ee,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(te," .").concat(te,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(H,`] {
    `).concat(wn,": ").concat(c,`px;
  }
`)},De=function(){var e=parseInt(document.body.getAttribute(H)||"0",10);return isFinite(e)?e:0},$n=function(){a.useEffect(function(){return document.body.setAttribute(H,(De()+1).toString()),function(){var e=De()-1;e<=0?document.body.removeAttribute(H):document.body.setAttribute(H,e.toString())}},[])},Bn=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,o=r===void 0?"margin":r;$n();var i=a.useMemo(function(){return _n(o)},[o]);return a.createElement(Fn,{styles:Wn(i,!t,o,n?"":"!important")})},pe=!1;if(typeof window<"u")try{var G=Object.defineProperty({},"passive",{get:function(){return pe=!0,!0}});window.addEventListener("test",G,G),window.removeEventListener("test",G,G)}catch{pe=!1}var B=pe?{passive:!1}:!1,Un=function(e){return e.tagName==="TEXTAREA"},Je=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!Un(e)&&n[t]==="visible")},Vn=function(e){return Je(e,"overflowY")},Hn=function(e){return Je(e,"overflowX")},Pe=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var o=et(e,r);if(o){var i=tt(e,r),l=i[1],c=i[2];if(l>c)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},zn=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},Kn=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},et=function(e,t){return e==="v"?Vn(t):Hn(t)},tt=function(e,t){return e==="v"?zn(t):Kn(t)},Yn=function(e,t){return e==="h"&&t==="rtl"?-1:1},Xn=function(e,t,n,r,o){var i=Yn(e,window.getComputedStyle(t).direction),l=i*r,c=n.target,f=t.contains(c),u=!1,m=l>0,h=0,g=0;do{if(!c)break;var x=tt(e,c),b=x[0],d=x[1],p=x[2],y=d-p-i*b;(b||y)&&et(e,c)&&(h+=y,g+=b);var w=c.parentNode;c=w&&w.nodeType===Node.DOCUMENT_FRAGMENT_NODE?w.host:w}while(!f&&c!==document.body||f&&(t.contains(c)||t===c));return(m&&Math.abs(h)<1||!m&&Math.abs(g)<1)&&(u=!0),u},Z=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},Oe=function(e){return[e.deltaX,e.deltaY]},Te=function(e){return e&&"current"in e?e.current:e},Gn=function(e,t){return e[0]===t[0]&&e[1]===t[1]},Zn=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},qn=0,U=[];function Qn(e){var t=a.useRef([]),n=a.useRef([0,0]),r=a.useRef(),o=a.useState(qn++)[0],i=a.useState(Qe)[0],l=a.useRef(e);a.useEffect(function(){l.current=e},[e]),a.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(o));var d=bn([e.lockRef.current],(e.shards||[]).map(Te),!0).filter(Boolean);return d.forEach(function(p){return p.classList.add("allow-interactivity-".concat(o))}),function(){document.body.classList.remove("block-interactivity-".concat(o)),d.forEach(function(p){return p.classList.remove("allow-interactivity-".concat(o))})}}},[e.inert,e.lockRef.current,e.shards]);var c=a.useCallback(function(d,p){if("touches"in d&&d.touches.length===2||d.type==="wheel"&&d.ctrlKey)return!l.current.allowPinchZoom;var y=Z(d),w=n.current,E="deltaX"in d?d.deltaX:w[0]-y[0],N="deltaY"in d?d.deltaY:w[1]-y[1],C,S=d.target,v=Math.abs(E)>Math.abs(N)?"h":"v";if("touches"in d&&v==="h"&&S.type==="range")return!1;var R=window.getSelection(),M=R&&R.anchorNode,_=M?M===S||M.contains(S):!1;if(_)return!1;var k=Pe(v,S);if(!k)return!0;if(k?C=v:(C=v==="v"?"h":"v",k=Pe(v,S)),!k)return!1;if(!r.current&&"changedTouches"in d&&(E||N)&&(r.current=C),!C)return!0;var Y=r.current||C;return Xn(Y,p,d,Y==="h"?E:N)},[]),f=a.useCallback(function(d){var p=d;if(!(!U.length||U[U.length-1]!==i)){var y="deltaY"in p?Oe(p):Z(p),w=t.current.filter(function(C){return C.name===p.type&&(C.target===p.target||p.target===C.shadowParent)&&Gn(C.delta,y)})[0];if(w&&w.should){p.cancelable&&p.preventDefault();return}if(!w){var E=(l.current.shards||[]).map(Te).filter(Boolean).filter(function(C){return C.contains(p.target)}),N=E.length>0?c(p,E[0]):!l.current.noIsolation;N&&p.cancelable&&p.preventDefault()}}},[]),u=a.useCallback(function(d,p,y,w){var E={name:d,delta:p,target:y,should:w,shadowParent:Jn(y)};t.current.push(E),setTimeout(function(){t.current=t.current.filter(function(N){return N!==E})},1)},[]),m=a.useCallback(function(d){n.current=Z(d),r.current=void 0},[]),h=a.useCallback(function(d){u(d.type,Oe(d),d.target,c(d,e.lockRef.current))},[]),g=a.useCallback(function(d){u(d.type,Z(d),d.target,c(d,e.lockRef.current))},[]);a.useEffect(function(){return U.push(i),e.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:g}),document.addEventListener("wheel",f,B),document.addEventListener("touchmove",f,B),document.addEventListener("touchstart",m,B),function(){U=U.filter(function(d){return d!==i}),document.removeEventListener("wheel",f,B),document.removeEventListener("touchmove",f,B),document.removeEventListener("touchstart",m,B)}},[]);var x=e.removeScrollBar,b=e.inert;return a.createElement(a.Fragment,null,b?a.createElement(i,{styles:Zn(o)}):null,x?a.createElement(Bn,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function Jn(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const er=Dn(qe,Qn);var nt=a.forwardRef(function(e,t){return a.createElement(se,O({},e,{ref:t,sideCar:er}))});nt.classNames=se.classNames;var tr=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},V=new WeakMap,q=new WeakMap,Q={},me=0,rt=function(e){return e&&(e.host||rt(e.parentNode))},nr=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=rt(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},rr=function(e,t,n,r){var o=nr(t,Array.isArray(e)?e:[e]);Q[n]||(Q[n]=new WeakMap);var i=Q[n],l=[],c=new Set,f=new Set(o),u=function(h){!h||c.has(h)||(c.add(h),u(h.parentNode))};o.forEach(u);var m=function(h){!h||f.has(h)||Array.prototype.forEach.call(h.children,function(g){if(c.has(g))m(g);else try{var x=g.getAttribute(r),b=x!==null&&x!=="false",d=(V.get(g)||0)+1,p=(i.get(g)||0)+1;V.set(g,d),i.set(g,p),l.push(g),d===1&&b&&q.set(g,!0),p===1&&g.setAttribute(n,"true"),b||g.setAttribute(r,"true")}catch(y){console.error("aria-hidden: cannot operate on ",g,y)}})};return m(t),c.clear(),me++,function(){l.forEach(function(h){var g=V.get(h)-1,x=i.get(h)-1;V.set(h,g),i.set(h,x),g||(q.has(h)||h.removeAttribute(r),q.delete(h)),x||h.removeAttribute(n)}),me--,me||(V=new WeakMap,V=new WeakMap,q=new WeakMap,Q={})}},sr=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),o=tr(e);return o?(r.push.apply(r,Array.from(o.querySelectorAll("[aria-live], script"))),rr(r,o,n,"aria-hidden")):function(){return null}},oe="Dialog",[st]=_t(oe),[or,D]=st(oe),ot=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:o,onOpenChange:i,modal:l=!0}=e,c=a.useRef(null),f=a.useRef(null),[u,m]=Ut({prop:r,defaultProp:o??!1,onChange:i,caller:oe});return s.jsx(or,{scope:t,triggerRef:c,contentRef:f,contentId:ae(),titleId:ae(),descriptionId:ae(),open:u,onOpenChange:m,onOpenToggle:a.useCallback(()=>m(h=>!h),[m]),modal:l,children:n})};ot.displayName=oe;var at="DialogTrigger",ar=a.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,o=D(at,n),i=W(t,o.triggerRef);return s.jsx(A.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":xe(o.open),...r,ref:i,onClick:I(e.onClick,o.onOpenToggle)})});ar.displayName=at;var ve="DialogPortal",[ir,it]=st(ve,{forceMount:void 0}),ct=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:o}=e,i=D(ve,t);return s.jsx(ir,{scope:t,forceMount:n,children:a.Children.map(r,l=>s.jsx(re,{present:n||i.open,children:s.jsx(Xe,{asChild:!0,container:o,children:l})}))})};ct.displayName=ve;var ne="DialogOverlay",lt=a.forwardRef((e,t)=>{const n=it(ne,e.__scopeDialog),{forceMount:r=n.forceMount,...o}=e,i=D(ne,e.__scopeDialog);return i.modal?s.jsx(re,{present:r||i.open,children:s.jsx(lr,{...o,ref:t})}):null});lt.displayName=ne;var cr=Ue("DialogOverlay.RemoveScroll"),lr=a.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,o=D(ne,n);return s.jsx(nt,{as:cr,allowPinchZoom:!0,shards:[o.contentRef],children:s.jsx(A.div,{"data-state":xe(o.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),F="DialogContent",ut=a.forwardRef((e,t)=>{const n=it(F,e.__scopeDialog),{forceMount:r=n.forceMount,...o}=e,i=D(F,e.__scopeDialog);return s.jsx(re,{present:r||i.open,children:i.modal?s.jsx(ur,{...o,ref:t}):s.jsx(dr,{...o,ref:t})})});ut.displayName=F;var ur=a.forwardRef((e,t)=>{const n=D(F,e.__scopeDialog),r=a.useRef(null),o=W(t,n.contentRef,r);return a.useEffect(()=>{const i=r.current;if(i)return sr(i)},[]),s.jsx(dt,{...e,ref:o,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:I(e.onCloseAutoFocus,i=>{i.preventDefault(),n.triggerRef.current?.focus()}),onPointerDownOutside:I(e.onPointerDownOutside,i=>{const l=i.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0;(l.button===2||c)&&i.preventDefault()}),onFocusOutside:I(e.onFocusOutside,i=>i.preventDefault())})}),dr=a.forwardRef((e,t)=>{const n=D(F,e.__scopeDialog),r=a.useRef(!1),o=a.useRef(!1);return s.jsx(dt,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{e.onCloseAutoFocus?.(i),i.defaultPrevented||(r.current||n.triggerRef.current?.focus(),i.preventDefault()),r.current=!1,o.current=!1},onInteractOutside:i=>{e.onInteractOutside?.(i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(o.current=!0));const l=i.target;n.triggerRef.current?.contains(l)&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&o.current&&i.preventDefault()}})}),dt=a.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:o,onCloseAutoFocus:i,...l}=e,c=D(F,n),f=a.useRef(null),u=W(t,f);return xn(),s.jsxs(s.Fragment,{children:[s.jsx(Ke,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:o,onUnmountAutoFocus:i,children:s.jsx(He,{role:"dialog",id:c.contentId,"aria-describedby":c.descriptionId,"aria-labelledby":c.titleId,"data-state":xe(c.open),...l,ref:u,onDismiss:()=>c.onOpenChange(!1)})}),s.jsxs(s.Fragment,{children:[s.jsx(fr,{titleId:c.titleId}),s.jsx(hr,{contentRef:f,descriptionId:c.descriptionId})]})]})}),ge="DialogTitle",ft=a.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,o=D(ge,n);return s.jsx(A.h2,{id:o.titleId,...r,ref:t})});ft.displayName=ge;var mt="DialogDescription",ht=a.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,o=D(mt,n);return s.jsx(A.p,{id:o.descriptionId,...r,ref:t})});ht.displayName=mt;var pt="DialogClose",vt=a.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,o=D(pt,n);return s.jsx(A.button,{type:"button",...r,ref:t,onClick:I(e.onClick,()=>o.onOpenChange(!1))})});vt.displayName=pt;function xe(e){return e?"open":"closed"}var gt="DialogTitleWarning",[Xr,xt]=It(gt,{contentName:F,titleName:ge,docsSlug:"dialog"}),fr=({titleId:e})=>{const t=xt(gt),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return a.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},mr="DialogDescriptionWarning",hr=({contentRef:e,descriptionId:t})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${xt(mr).contentName}}.`;return a.useEffect(()=>{const o=e.current?.getAttribute("aria-describedby");t&&o&&(document.getElementById(t)||console.warn(r))},[r,e,t]),null},pr=ot,vr=ct,gr=lt,xr=ut,br=ft,yr=ht,bt=vt;const wr=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),yt=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim();var Er={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Nr=a.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:o="",children:i,iconNode:l,...c},f)=>a.createElement("svg",{ref:f,...Er,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:yt("lucide",o),...c},[...l.map(([u,m])=>a.createElement(u,m)),...Array.isArray(i)?i:[i]]));const Cr=(e,t)=>{const n=a.forwardRef(({className:r,...o},i)=>a.createElement(Nr,{ref:i,iconNode:t,className:yt(`lucide-${wr(e)}`,r),...o}));return n.displayName=`${e}`,n};const Sr=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],jr=Cr("X",Sr);function Rr({...e}){return s.jsx(pr,{"data-slot":"dialog",...e})}function Dr({...e}){return s.jsx(vr,{"data-slot":"dialog-portal",...e})}function Pr({className:e,...t}){return s.jsx(gr,{"data-slot":"dialog-overlay",className:T("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...t})}function Or({className:e,children:t,showCloseButton:n=!0,...r}){return s.jsxs(Dr,{"data-slot":"dialog-portal",children:[s.jsx(Pr,{}),s.jsxs(xr,{"data-slot":"dialog-content",className:T("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 outline-none sm:max-w-lg",e),...r,children:[t,n&&s.jsxs(bt,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[s.jsx(jr,{}),s.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function Tr({className:e,...t}){return s.jsx("div",{"data-slot":"dialog-header",className:T("flex flex-col gap-2 text-center sm:text-left",e),...t})}function Ar({className:e,showCloseButton:t=!1,children:n,...r}){return s.jsxs("div",{"data-slot":"dialog-footer",className:T("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",e),...r,children:[n,t&&s.jsx(bt,{asChild:!0,children:s.jsx(P,{variant:"outline",children:"Close"})})]})}function Mr({className:e,...t}){return s.jsx(br,{"data-slot":"dialog-title",className:T("text-lg leading-none font-semibold",e),...t})}function kr({className:e,...t}){return s.jsx(yr,{"data-slot":"dialog-description",className:T("text-muted-foreground text-sm",e),...t})}function Lr({isOpen:e,sessionId:t,onClose:n}){const{signUp:r}=Ie(),[o,i]=a.useState(""),[l,c]=a.useState(""),[f,u]=a.useState(null),[m,h]=a.useState(!1),[g,x]=a.useState(!1),b=p=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(p),d=async p=>{if(p.preventDefault(),u(null),!b(o)){u("Please enter a valid email address");return}if(l.length<12){u("Password must be at least 12 characters");return}h(!0);try{await r.email(o,l,void 0,t),x(!0),setTimeout(()=>{n()},1500)}catch(y){const w=y instanceof Error?y.message:String(y);u(w)}finally{h(!1)}};return s.jsx(Rr,{open:e,onOpenChange:p=>!p&&n(),children:s.jsxs(Or,{className:"bg-slate-800 border-slate-700 sm:max-w-md",children:[s.jsxs(Tr,{children:[s.jsx(Mr,{className:"text-white text-xl",children:"Save your results?"}),s.jsx(kr,{className:"text-slate-300",children:"Sign up to continue and keep your personality insights"})]}),g?s.jsxs("div",{className:"py-6 text-center",children:[s.jsx("div",{className:"text-green-400 text-lg font-medium mb-2",children:"✓ Your results are being saved!"}),s.jsx("p",{className:"text-slate-300 text-sm",children:"You can now access them anytime"})]}):s.jsxs("form",{onSubmit:d,className:"space-y-4",children:[f&&s.jsx("div",{className:"bg-red-900/20 border border-red-700/30 text-red-300 p-3 rounded text-sm",children:f}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"modal-email",className:"block text-sm font-medium text-slate-300 mb-1",children:"Email"}),s.jsx("input",{id:"modal-email",type:"email",value:o,onChange:p=>i(p.target.value),required:!0,placeholder:"your.email@example.com",className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 text-white rounded-lg placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"modal-password",className:"block text-sm font-medium text-slate-300 mb-1",children:"Password"}),s.jsx("input",{id:"modal-password",type:"password",value:l,onChange:p=>c(p.target.value),required:!0,minLength:12,placeholder:"At least 12 characters",className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 text-white rounded-lg placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent"}),s.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Minimum 12 characters (NIST 2025)"})]}),s.jsxs(Ar,{className:"flex flex-col gap-2 sm:flex-col",children:[s.jsx(P,{type:"submit",disabled:m,className:"w-full bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600 text-white",children:m?"Signing up...":"Sign Up"}),s.jsx(P,{type:"button",variant:"ghost",onClick:n,className:"w-full text-slate-300 hover:text-white hover:bg-slate-700/50",children:"Continue without account"})]})]})]})})}function Ir({message:e,onRetry:t,onDismiss:n,autoDismissMs:r=5e3}){return a.useEffect(()=>{if(r>0){const o=setTimeout(n,r);return()=>clearTimeout(o)}},[r,n]),s.jsxs("div",{className:"mx-4 mb-2 p-3 bg-red-900/20 border border-red-700/30 rounded-lg flex items-center justify-between",children:[s.jsx("p",{className:"text-sm text-red-200",children:e}),s.jsxs("div",{className:"flex gap-2",children:[t&&s.jsx("button",{type:"button",onClick:t,className:"text-xs text-red-300 hover:text-white",children:"Retry"}),s.jsx("button",{type:"button",onClick:n,className:"text-xs text-red-400 hover:text-red-200",children:"×"})]})]})}const _r=({value:e,label:t,showPercentage:n=!0,className:r=""})=>{const o=Math.min(Math.max(e,0),100),i=a.useMemo(()=>o>80?"You're nearly there!":`${Math.round(o)}% assessed`,[o]),l=t??i,c=n&&o<=80;return s.jsxs("div",{className:`w-full max-w-md mx-auto px-4 py-2 ${r}`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-1 text-sm",children:[s.jsx("span",{className:"text-slate-300",children:l}),c&&s.jsxs("span",{className:"text-slate-400 font-medium",children:[Math.round(o),"%"]})]}),s.jsx("div",{"data-testid":"progress-track",role:"progressbar","aria-valuenow":o,"aria-valuemin":0,"aria-valuemax":100,"aria-label":l,className:"w-full bg-slate-700 h-3 rounded-full overflow-hidden",children:s.jsx("div",{"data-testid":"progress-fill",className:"h-full bg-gradient-to-r from-blue-500 to-purple-500 rounded-full transition-all duration-500 ease-in-out",style:{width:`${o}%`}})})]})},Fr={opennessConfidence:"Openness",conscientiousnessConfidence:"Conscientiousness",extraversionConfidence:"Extraversion",agreeablenessConfidence:"Agreeableness",neuroticismConfidence:"Neuroticism"};function Wr(){return s.jsx("div",{className:"flex justify-start",children:s.jsx("div",{className:"max-w-[85%] lg:max-w-md px-4 py-3 rounded-lg bg-slate-700/50 border border-slate-600",children:s.jsxs("div",{className:"flex gap-1.5 items-center",children:[s.jsx("span",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),s.jsx("span",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),s.jsx("span",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})})})}function Ae({traits:e,isCompleted:t,sessionId:n}){const r=Le();return s.jsxs(Fe,{className:"bg-slate-800/50 border-slate-700",children:[s.jsx(We,{children:s.jsx($e,{className:"text-lg text-white",children:t?"Assessment Complete!":"Current Scores"})}),s.jsxs(Be,{className:"space-y-4",children:[Object.entries(Fr).map(([o,i])=>{const l=e[o]??0,c=Math.round(l),f=c>=90?"bg-green-500":c>=70?"bg-yellow-500":"bg-orange-500";return s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between mb-2",children:[s.jsx("span",{className:"text-sm font-medium text-gray-300",children:i}),s.jsxs("span",{className:"text-sm font-bold text-gray-100",children:[c,"%"]})]}),s.jsx("div",{className:"w-full bg-slate-700 rounded-full h-2",children:s.jsx("div",{className:`h-2 rounded-full transition-all ${f}`,style:{width:`${c}%`}})})]},o)}),t&&s.jsxs("div",{className:"mt-4 space-y-3",children:[s.jsx("div",{className:"p-3 bg-green-900/20 border border-green-700/30 rounded-lg",children:s.jsx("p",{className:"text-sm text-green-200 font-medium",children:"Assessment completed successfully!"})}),s.jsxs(P,{onClick:()=>r({to:"/results",search:{sessionId:n}}),className:"w-full bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600",children:[s.jsx(_e,{className:"w-4 h-4 mr-2"}),"View Results & Share"]})]})]})]})}function $r({sessionId:e,onMessageClick:t}){const[n,r]=a.useState(""),o=a.useRef(null),i=a.useRef(null),{messages:l,traits:c,isLoading:f,isCompleted:u,errorMessage:m,errorType:h,clearError:g,retryLastMessage:x,sendMessage:b,isResuming:d,resumeError:p,isConfidenceReady:y,hasShownCelebration:w,setHasShownCelebration:E}=Lt(e),{isAuthenticated:N}=Ie(),C=Le(),[S,v]=a.useState(!1),[R,M]=a.useState(!1),[_,k]=a.useState(!1),Y=a.useMemo(()=>(c.openness+c.conscientiousness+c.extraversion+c.agreeableness+c.neuroticism)/5,[c]),wt=l.length;a.useEffect(()=>{o.current?.scrollIntoView({behavior:"smooth"})},[wt]),a.useEffect(()=>{h==="session"&&C({to:"/chat"})},[h,C]),a.useEffect(()=>{l.filter($=>$.role==="user").length===1&&!R&&!N&&(v(!0),M(!0))},[l,R,N]),a.useEffect(()=>{const j=window.visualViewport;if(!j)return;const $=()=>{i.current?.scrollIntoView({block:"nearest"})};return j.addEventListener("resize",$),()=>j.removeEventListener("resize",$)},[]);const be=async()=>{!n.trim()||f||(await b(n),r(""))},Et=j=>{j.key==="Enter"&&!j.shiftKey&&(j.preventDefault(),be())},Nt=(j,$)=>{$==="user"&&t&&t(j)};return s.jsxs(s.Fragment,{children:[s.jsx(Lr,{isOpen:S,sessionId:e,onClose:()=>v(!1)}),s.jsxs("div",{className:"h-screen flex flex-col bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900",children:[s.jsxs("div",{className:"bg-slate-800/50 border-b border-slate-700 px-4 md:px-6 py-3 md:py-4 shadow-sm backdrop-blur-sm",children:[s.jsx("h1",{className:"text-xl md:text-2xl font-bold bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent",children:"Big Five Personality Assessment"}),s.jsxs("p",{className:"text-xs md:text-sm text-gray-400 mt-1",children:["Session ID:"," ",s.jsx("code",{className:"bg-slate-700 px-2 py-0.5 md:py-1 rounded text-gray-300 text-xs",children:e})]})]}),l.length>0&&!d&&!p&&s.jsx("div",{className:"bg-slate-800/50 border-b border-slate-700",children:s.jsx(_r,{value:Y,showPercentage:!0})}),s.jsxs("div",{className:"flex-1 overflow-hidden flex gap-4 p-4",children:[s.jsxs("div",{className:"flex-1 flex flex-col min-w-0",children:[d&&s.jsx("div",{className:"flex-1 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx(J,{className:"h-8 w-8 animate-spin text-blue-400 mx-auto"}),s.jsx("p",{className:"text-slate-300 mt-4",children:"Loading your assessment..."})]})}),!d&&p&&(p.message.includes("404")||p.message.includes("SessionNotFound"))&&s.jsx("div",{className:"flex-1 flex items-center justify-center",children:s.jsxs("div",{className:"text-center max-w-md",children:[s.jsx("p",{className:"text-red-400 text-lg",children:"Session not found"}),s.jsx("p",{className:"text-slate-400 mt-2",children:"This session may have expired or doesn't exist."}),s.jsx(P,{className:"mt-4",onClick:()=>C({to:"/chat"}),children:"Start New Assessment"})]})}),!d&&p&&!p.message.includes("404")&&!p.message.includes("SessionNotFound")&&s.jsx("div",{className:"flex-1 flex items-center justify-center",children:s.jsxs("div",{className:"text-center max-w-md",children:[s.jsx("p",{className:"text-red-400 text-lg",children:"Something went wrong"}),s.jsx("p",{className:"text-slate-400 mt-2",children:"Unable to load your assessment."}),s.jsx(P,{className:"mt-4",onClick:()=>window.location.reload(),children:"Retry"})]})}),!d&&!p&&s.jsxs("div",{className:"flex-1 overflow-y-auto space-y-4 mb-4",children:[l.length===0?s.jsx("div",{className:"h-full flex items-center justify-center",children:s.jsxs(Fe,{className:"w-full max-w-md bg-slate-800/50 border-slate-700",children:[s.jsx(We,{children:s.jsx($e,{className:"text-center text-white",children:"Welcome to Personality Assessment"})}),s.jsxs(Be,{className:"space-y-4",children:[s.jsx("p",{className:"text-gray-300 text-center",children:"The AI therapist will ask you questions to evaluate your personality across five key dimensions. Ready to begin?"}),s.jsx(P,{onClick:()=>b(),disabled:f,className:"w-full bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600",children:f?s.jsxs(s.Fragment,{children:[s.jsx(J,{className:"mr-2 h-4 w-4 animate-spin"}),"Starting..."]}):"Start Assessment"})]})]})}):l.map(j=>s.jsx("div",{className:`flex ${j.role==="user"?"justify-end":"justify-start"}`,children:j.role==="user"?s.jsxs("button",{type:"button","data-message-id":j.id,onClick:()=>Nt(j.id,j.role),className:"max-w-[85%] lg:max-w-md px-4 py-2 rounded-lg text-left bg-gradient-to-r from-blue-500 to-purple-500 text-white cursor-pointer hover:ring-2 hover:ring-blue-300/40 transition-shadow",children:[s.jsx("p",{className:"text-sm",children:j.content}),s.jsx("p",{className:"text-xs mt-1 text-blue-100",children:j.timestamp.toLocaleTimeString()})]}):s.jsxs("div",{"data-message-id":j.id,className:"max-w-[85%] lg:max-w-md px-4 py-2 rounded-lg bg-slate-700/50 border border-slate-600 text-gray-100",children:[s.jsx("p",{className:"text-sm",children:j.content}),s.jsx("p",{className:"text-xs mt-1 text-gray-400",children:j.timestamp.toLocaleTimeString()})]})},j.id)),f&&s.jsx(Wr,{}),s.jsx("div",{ref:o})]}),m&&s.jsx(Ir,{message:m,onRetry:h==="network"||h==="generic"?x:void 0,onDismiss:g,autoDismissMs:h==="budget"||h==="rate-limit"?0:5e3}),s.jsx("div",{className:"bg-slate-800/50 border border-slate-700 rounded-lg p-3 md:p-4 backdrop-blur-sm sticky bottom-0",children:s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{ref:i,type:"text",value:n,onChange:j=>r(j.target.value),onKeyDown:Et,placeholder:"Type your response here...",disabled:f||u,className:"flex-1 px-4 py-2 bg-slate-700 border border-slate-600 text-white rounded-lg placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent disabled:opacity-50 disabled:cursor-not-allowed"}),s.jsx(P,{onClick:be,disabled:!n.trim()||f||u,size:"sm",className:"bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600",children:f?s.jsx(J,{className:"h-4 w-4 animate-spin"}):s.jsx(Mt,{className:"h-4 w-4"})})]})})]}),s.jsx("div",{className:"hidden md:flex md:w-80 flex-col",children:s.jsx(Ae,{traits:c,isCompleted:u,sessionId:e})})]}),s.jsx("div",{className:"md:hidden fixed bottom-20 right-4 z-10",children:s.jsx("button",{type:"button",onClick:()=>k(!0),className:"bg-slate-700 rounded-full p-3 shadow-lg hover:bg-slate-600 transition-colors","aria-label":"Show trait scores",children:s.jsx(_e,{className:"h-5 w-5 text-white"})})}),_&&s.jsxs("div",{className:"md:hidden fixed inset-0 z-50 flex items-end",children:[s.jsx("button",{type:"button",className:"absolute inset-0 bg-black/50 cursor-default",onClick:()=>k(!1),"aria-label":"Close trait scores"}),s.jsxs("div",{className:"relative w-full max-h-[60vh] overflow-y-auto bg-slate-900 border-t border-slate-700 rounded-t-xl p-4",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h2",{className:"text-lg font-bold text-white",children:"Trait Scores"}),s.jsx("button",{type:"button",onClick:()=>k(!1),className:"text-gray-400 hover:text-white","aria-label":"Close",children:s.jsx(jt,{className:"h-5 w-5"})})]}),s.jsx(Ae,{traits:c,isCompleted:u,sessionId:e})]})]}),y&&!w&&s.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center bg-black/60",children:s.jsxs("div",{className:"bg-slate-800 border border-slate-700 rounded-2xl p-8 max-w-md text-center",children:[s.jsx("h2",{className:"text-2xl font-bold text-white",children:"Your Personality Profile is Ready!"}),s.jsx("p",{className:"text-slate-300 mt-2",children:"You've reached 70%+ confidence"}),s.jsxs("div",{className:"mt-6 flex gap-3 justify-center",children:[s.jsx(P,{onClick:()=>C({to:"/results/$sessionId",params:{sessionId:e}}),className:"bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600","data-testid":"view-results-btn",children:"View My Results"}),s.jsx(P,{variant:"outline",onClick:()=>E(!0),children:"Keep Exploring"})]})]})})]})]})}function Gr(){const{sessionId:e}=Rt.useSearch();return e?s.jsx($r,{sessionId:e}):s.jsx("div",{className:"h-screen flex items-center justify-center bg-gray-50",children:s.jsxs("div",{className:"text-center",children:[s.jsx(J,{className:"h-12 w-12 animate-spin text-blue-500 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Creating assessment session..."})]})})}export{Gr as component};
