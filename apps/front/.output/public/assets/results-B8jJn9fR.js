import{c as h,R as E,u as A,r as d,j as e}from"./main-RiaZkz5G.js";import{B as r}from"./button-B3t8njBi.js";import{u as L}from"./use-assessment-ogEYb1AK.js";import{u as I,a as M,C as R,b as _,E as F}from"./use-profile-8lLscN6D.js";import{L as x}from"./loader-circle-BWRtFEy-.js";import{W as G,T as O,H as Y,a as $,Z as U,L as H}from"./zap-DftW3tDo.js";import"./utils-CDN07tui.js";import"./useMutation-CSCeiqsJ.js";const V=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],q=h("eye-off",V);const z=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],f=h("message-circle",z);const B=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],N=h("share-2",B),W={openness:{label:"Openness",icon:e.jsx(H,{className:"w-5 h-5"}),color:"text-amber-400",barColor:"bg-amber-400"},conscientiousness:{label:"Conscientiousness",icon:e.jsx(U,{className:"w-5 h-5"}),color:"text-blue-400",barColor:"bg-blue-400"},extraversion:{label:"Extraversion",icon:e.jsx($,{className:"w-5 h-5"}),color:"text-rose-400",barColor:"bg-rose-400"},agreeableness:{label:"Agreeableness",icon:e.jsx(Y,{className:"w-5 h-5"}),color:"text-green-400",barColor:"bg-green-400"},neuroticism:{label:"Neuroticism",icon:e.jsx(O,{className:"w-5 h-5"}),color:"text-purple-400",barColor:"bg-purple-400"}};function te(){const{sessionId:l}=E.useSearch(),i=A(),{data:n,isLoading:y,error:u}=L(l),o=I(),m=M(),[t,b]=d.useState(null),[v,c]=d.useState(!1),[p,g]=d.useState(null),w=async()=>{g(null);try{const s=await o.mutateAsync(l);b(s)}catch(s){g(s instanceof Error?s.message:"Failed to create shareable profile")}},C=async()=>{if(t)try{await navigator.clipboard.writeText(t.shareableUrl),c(!0),setTimeout(()=>c(!1),2e3)}catch{const s=document.createElement("textarea");s.value=t.shareableUrl,document.body.appendChild(s),s.select(),document.execCommand("copy"),document.body.removeChild(s),c(!0),setTimeout(()=>c(!1),2e3)}},k=async()=>{if(t)try{const s=await m.mutateAsync({publicProfileId:t.publicProfileId,isPublic:!t.isPublic});b(a=>a?{...a,isPublic:s.isPublic}:null)}catch{}};if(!l)return e.jsx("div",{className:"min-h-screen bg-gradient-to-b from-slate-900 via-slate-800 to-slate-900 flex items-center justify-center px-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-white mb-4",children:"No Session Found"}),e.jsx("p",{className:"text-gray-400 mb-6",children:"Start an assessment to see your results."}),e.jsx(r,{onClick:()=>i({to:"/chat",search:{sessionId:void 0}}),className:"bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600",children:"Start Assessment"})]})});if(y)return e.jsx("div",{className:"min-h-screen bg-gradient-to-b from-slate-900 via-slate-800 to-slate-900 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(x,{className:"h-12 w-12 animate-spin text-blue-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-400",children:"Calculating your personality profile..."})]})});if(u||!n)return e.jsx("div",{className:"min-h-screen bg-gradient-to-b from-slate-900 via-slate-800 to-slate-900 flex items-center justify-center px-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-white mb-4",children:"Could Not Load Results"}),e.jsx("p",{className:"text-gray-400 mb-6",children:u?.message||"Your assessment may not be complete yet."}),e.jsxs(r,{onClick:()=>i({to:"/chat",search:{sessionId:l}}),className:"bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600",children:[e.jsx(f,{className:"w-4 h-4 mr-2"}),"Continue Assessment"]})]})});const P=["openness","conscientiousness","extraversion","agreeableness","neuroticism"],S=120;return e.jsx("div",{className:"min-h-screen bg-gradient-to-b from-slate-900 via-slate-800 to-slate-900 py-8 px-4 md:px-6",children:e.jsxs("div",{className:"max-w-2xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"w-20 h-20 rounded-full mx-auto mb-4 flex items-center justify-center bg-blue-500/20",children:e.jsx(G,{className:"w-10 h-10 text-blue-400"})}),e.jsx("p",{className:"text-sm text-slate-400 uppercase tracking-wider mb-2",children:"Your Personality Archetype"}),e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-white mb-2",children:n.archetypeName}),e.jsxs("p",{className:"text-sm font-mono text-slate-400",children:["OCEAN Code: ",n.oceanCode]})]}),e.jsxs("div",{className:"bg-slate-800/50 border border-slate-700 rounded-xl p-6 mb-8",children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-6",children:"Your Trait Scores"}),e.jsx("div",{className:"space-y-5",children:P.map(s=>{const a=W[s],T=n.traits[s],j=Math.round(T/S*100);return a?e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:`flex items-center gap-2 ${a.color}`,children:[a.icon,e.jsx("span",{className:"text-sm font-medium text-gray-300",children:a.label})]}),e.jsxs("span",{className:"text-sm font-semibold text-gray-100",children:[j,"%"]})]}),e.jsx("div",{className:"w-full bg-slate-700 rounded-full h-2.5",children:e.jsx("div",{className:`h-2.5 rounded-full transition-all duration-500 ${a.barColor}`,style:{width:`${j}%`}})})]},s):null})})]}),e.jsxs("div",{className:"bg-slate-800/50 border border-slate-700 rounded-xl p-6 mb-8",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(N,{className:"w-5 h-5 text-slate-400"}),e.jsx("h2",{className:"text-lg font-semibold text-white",children:"Share Your Profile"})]}),t?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 bg-slate-900/50 rounded-lg p-3",children:[e.jsx("code",{className:"text-sm text-blue-400 flex-1 truncate",children:t.shareableUrl}),e.jsx(r,{onClick:C,size:"sm",variant:"outline",className:"border-slate-600 text-gray-300 hover:bg-slate-700 hover:text-white shrink-0",children:v?e.jsx(R,{className:"w-4 h-4 text-green-400"}):e.jsx(_,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[t.isPublic?e.jsx(F,{className:"w-4 h-4 text-green-400"}):e.jsx(q,{className:"w-4 h-4 text-slate-400"}),e.jsx("span",{className:"text-sm text-gray-300",children:t.isPublic?"Profile is public":"Profile is private"})]}),e.jsx(r,{onClick:k,size:"sm",variant:"outline",disabled:m.isPending,className:"border-slate-600 text-gray-300 hover:bg-slate-700 hover:text-white",children:m.isPending?e.jsx(x,{className:"w-4 h-4 animate-spin"}):t.isPublic?"Make Private":"Make Public"})]}),!t.isPublic&&e.jsx("p",{className:"text-xs text-slate-500",children:"Your profile link has been created but is private. Toggle to public so others can view it."})]}):e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-sm mb-4",children:"Generate a shareable link so others can see your personality archetype."}),p&&e.jsx("p",{className:"text-red-400 text-sm mb-4",children:p}),e.jsx(r,{onClick:w,disabled:o.isPending,className:"bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600",children:o.isPending?e.jsxs(e.Fragment,{children:[e.jsx(x,{className:"w-4 h-4 mr-2 animate-spin"}),"Generating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(N,{className:"w-4 h-4 mr-2"}),"Generate Shareable Link"]})})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-3 justify-center",children:[e.jsxs(r,{onClick:()=>i({to:"/chat",search:{sessionId:l}}),variant:"outline",className:"border-slate-600 text-gray-300 hover:bg-slate-700 hover:text-white",children:[e.jsx(f,{className:"w-4 h-4 mr-2"}),"Continue Chat"]}),e.jsx(r,{onClick:()=>i({to:"/chat",search:{sessionId:void 0}}),className:"bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600",children:"Start New Assessment"})]})]})})}export{te as component};
