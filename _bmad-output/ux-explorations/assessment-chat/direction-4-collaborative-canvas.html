<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Direction 4: Collaborative Canvas — Assessment Chat</title>
<link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&family=DM+Sans:ital,wght@0,400;0,500;0,600;1,400&family=JetBrains+Mono&display=swap" rel="stylesheet">
<style>
*{margin:0;padding:0;box-sizing:border-box}
:root{
  --bg:#FFF8F0;--fg:#1A1A2E;--primary:#FF0080;--secondary:#FF6B2B;
  --tertiary:#00B4A6;--card:#FFF0E8;--muted:#6B6580;--border:#FFD6C4;
  --trait-o:#7B2FBE;--trait-c:#D4722A;--trait-e:#E0307B;--trait-a:#00B4A6;--trait-n:#1A1A5E;
}
body{font-family:'DM Sans',sans-serif;color:var(--fg);background:var(--bg);margin:0;display:grid;grid-template-columns:1.3fr 1fr;grid-template-rows:auto 1fr auto;height:100vh;overflow:hidden}

/* NAV */
nav{grid-column:1/3;padding:16px 24px;display:flex;justify-content:space-between;align-items:center;background:rgba(255,248,240,.95);border-bottom:1px solid var(--border)}
.logo{font-family:'Space Grotesk',sans-serif;font-weight:700;font-size:1.1rem;display:flex;align-items:center;gap:8px}
.logo .dot{width:9px;height:9px;border-radius:50%;background:var(--primary)}
.canvas-toggle{font-family:'JetBrains Mono',monospace;font-size:.7rem;color:var(--muted);display:flex;align-items:center;gap:8px}
.toggle-btn{background:var(--card);border:1px solid var(--border);padding:6px 12px;border-radius:6px;cursor:pointer;transition:all .2s}
.toggle-btn:hover{border-color:var(--primary)}

/* CHAT */
.chat-area{grid-column:1;overflow-y:auto;padding:24px;display:flex;flex-direction:column;gap:16px}
.msg{display:flex;gap:11px;opacity:0;transform:translateY(20px);transition:all .5s cubic-bezier(.16,1,.3,1)}
.msg.vis{opacity:1;transform:translateY(0)}
.msg.n{flex-direction:row}
.msg.u{flex-direction:row-reverse}
.av{width:36px;height:36px;border-radius:50%;flex-shrink:0;display:flex;align-items:center;justify-content:center;font-size:.8rem;font-weight:700;font-family:'Space Grotesk',sans-serif}
.msg.n .av{background:linear-gradient(135deg,var(--tertiary),var(--primary));color:#fff}
.msg.u .av{background:var(--card);border:1px solid var(--border)}
.bub{padding:16px 20px;border-radius:16px;max-width:85%;font-size:.92rem;line-height:1.65;background:var(--card);border:1px solid var(--border)}
.msg.n .bub{border-bottom-left-radius:5px}
.msg.u .bub{background:linear-gradient(120deg,var(--primary),var(--secondary));color:#fff;border:none;border-bottom-right-radius:5px}

/* CANVAS */
.canvas-area{grid-column:2;grid-row:2;background:linear-gradient(180deg,#FFF8F0,#FFF0E8);border-left:1px solid var(--border);padding:24px;overflow-y:auto;display:flex;flex-direction:column;gap:24px}
.canvas-section{background:#fff;border:1px solid var(--border);border-radius:16px;padding:20px}
.canvas-section h3{font-family:'Space Grotesk',sans-serif;font-size:.85rem;margin-bottom:16px;color:var(--muted)}

/* RADAR CHART */
.radar-container{display:flex;justify-content:center;margin:20px 0}

/* FACET BUBBLES */
.bubbles{display:flex;flex-wrap:wrap;gap:8px;justify-content:center}
.bubble{padding:8px 14px;border-radius:20px;font-size:.7rem;border:1px solid;display:inline-flex;align-items:center;gap:6px;cursor:pointer;transition:all .3s;opacity:.4}
.bubble.active{opacity:1;transform:scale(1.05)}
.bubble-o{border-color:var(--trait-o);color:var(--trait-o);background:rgba(123,47,190,.05)}
.bubble-c{border-color:var(--trait-c);color:var(--trait-c);background:rgba(212,114,42,.05)}
.bubble-e{border-color:var(--trait-e);color:var(--trait-e);background:rgba(224,48,123,.05)}
.bubble-a{border-color:var(--trait-a);color:var(--trait-a);background:rgba(0,180,166,.05)}
.bubble-n{border-color:var(--trait-n);color:var(--trait-n);background:rgba(26,26,94,.05)}
.bubble-dot{width:6px;height:6px;border-radius:50%}

/* EVIDENCE NOTES */
.notes{display:flex;flex-direction:column;gap:8px;max-height:200px;overflow-y:auto}
.note{background:var(--card);border:1px solid var(--border);border-left:3px solid var(--primary);border-radius:6px;padding:10px;font-size:.75rem;line-height:1.5;cursor:move;transition:all .2s}
.note:hover{border-left-color:var(--secondary);box-shadow:0 2px 8px rgba(255,0,128,.1)}
.note-meta{font-family:'JetBrains Mono',monospace;font-size:.6rem;color:var(--muted);margin-top:6px}

/* INPUT */
.chat-input-bar{grid-column:1;padding:16px;background:rgba(255,248,240,.95);border-top:1px solid var(--border);display:flex;gap:10px}
.chat-input{flex:1;padding:12px 18px;border-radius:10px;border:1px solid var(--border);background:#fff;font-family:'DM Sans',sans-serif;font-size:.9rem;outline:none}
.send-btn{background:linear-gradient(120deg,var(--primary),var(--secondary));color:#fff;border:none;padding:12px 24px;border-radius:10px;font-family:'Space Grotesk',sans-serif;font-weight:600;cursor:pointer}

@media(max-width:1024px){
  body{grid-template-columns:1fr;grid-template-rows:auto 1fr auto}
  .canvas-area{display:none}
  .chat-area{grid-column:1}
  .chat-input-bar{grid-column:1;grid-row:3}
}
</style>
</head>
<body>

<nav>
  <div class="logo"><span class="dot"></span> Big Ocean</div>
  <div class="canvas-toggle">
    <span>Co-Creating Profile</span>
    <div class="toggle-btn">Live Canvas →</div>
  </div>
</nav>

<div class="chat-area" id="chat">
  <!-- Messages added by JS -->
</div>

<div class="canvas-area">
  <div class="canvas-section">
    <h3>Live Trait Radar</h3>
    <div class="radar-container">
      <svg width="220" height="220" viewBox="0 0 200 200">
        <!-- Grid -->
        <polygon points="100,20 175,65 155,155 45,155 25,65" fill="none" stroke="var(--border)" stroke-width="1"/>
        <polygon points="100,45 155,75 142,140 58,140 45,75" fill="none" stroke="var(--border)" stroke-width="1" opacity=".5"/>
        <polygon points="100,70 135,88 128,125 72,125 65,88" fill="none" stroke="var(--border)" stroke-width="1" opacity=".3"/>
        <!-- Data (updates live) -->
        <polygon id="radarShape" points="100,100 100,100 100,100 100,100 100,100" fill="rgba(255,0,128,.12)" stroke="var(--primary)" stroke-width="2"/>
        <!-- Points -->
        <circle id="o-point" cx="100" cy="100" r="4" fill="var(--trait-o)"/>
        <circle id="c-point" cx="100" cy="100" r="4" fill="var(--trait-c)"/>
        <circle id="e-point" cx="100" cy="100" r="4" fill="var(--trait-e)"/>
        <circle id="a-point" cx="100" cy="100" r="4" fill="var(--trait-a)"/>
        <circle id="n-point" cx="100" cy="100" r="4" fill="var(--trait-n)"/>
        <!-- Labels -->
        <text x="100" y="15" text-anchor="middle" font-size="10" fill="var(--trait-o)">O</text>
        <text x="180" y="70" text-anchor="middle" font-size="10" fill="var(--trait-c)">C</text>
        <text x="160" y="165" text-anchor="middle" font-size="10" fill="var(--trait-e)">E</text>
        <text x="40" y="165" text-anchor="middle" font-size="10" fill="var(--trait-a)">A</text>
        <text x="20" y="70" text-anchor="middle" font-size="10" fill="var(--trait-n)">N</text>
      </svg>
    </div>
  </div>

  <div class="canvas-section">
    <h3>Active Facets</h3>
    <div class="bubbles" id="bubbles">
      <div class="bubble bubble-o"><span class="bubble-dot" style="background:var(--trait-o)"></span>Imagination</div>
      <div class="bubble bubble-o"><span class="bubble-dot" style="background:var(--trait-o)"></span>Artistic</div>
      <div class="bubble bubble-c"><span class="bubble-dot" style="background:var(--trait-c)"></span>Self-Efficacy</div>
      <div class="bubble bubble-e"><span class="bubble-dot" style="background:var(--trait-e)"></span>Assertiveness</div>
      <div class="bubble bubble-a"><span class="bubble-dot" style="background:var(--trait-a)"></span>Trust</div>
    </div>
  </div>

  <div class="canvas-section">
    <h3>Evidence Fragments</h3>
    <div class="notes" id="notes">
      <div class="note">
        "I quit my job to start a design studio"
        <div class="note-meta">→ Artistic, Adventure, Self-Efficacy</div>
      </div>
    </div>
  </div>
</div>

<div class="chat-input-bar">
  <input type="text" class="chat-input" placeholder="Type your response...">
  <button class="send-btn">Send</button>
</div>

<script>
const messages = [
  {type:'n',text:'Hi! I\'m Nerin. Notice the canvas on the right? As we talk, we\'ll build your personality profile together—you can see it emerge in real-time.',evidence:null,facets:[]},
  {type:'u',text:'That\'s really cool. How does it work?',evidence:null,facets:[]},
  {type:'n',text:'Watch the radar chart. Right now it\'s blank. But with each answer you give, the shape will grow. Let\'s start: Tell me about a creative project you\'re proud of.',evidence:null,facets:[]},
  {type:'u',text:'I designed a mobile app that helps people track their mood patterns.',evidence:'I designed a mobile app that helps people track their mood patterns',facets:['Artistic','Intellect','Self-Efficacy']},
  {type:'n',text:'Beautiful! See those facet bubbles lighting up? <strong>Artistic</strong>, <strong>Intellect</strong>, <strong>Self-Efficacy</strong>. And watch the radar—<span style="color:var(--trait-o)">Openness</span> and <span style="color:var(--trait-c)">Conscientiousness</span> are starting to fill in.',evidence:null,facets:[],radar:{o:60,c:55,e:50,a:50,n:50}},
  {type:'u',text:'Wow, I can actually see it building!',evidence:null,facets:[]},
  {type:'n',text:'Exactly. You\'re co-creating this with me. Now, how do you handle setbacks in projects like that?',evidence:null,facets:[]},
  {type:'u',text:'I analyze what went wrong, adjust, and keep going. Giving up isn\'t an option.',evidence:'I analyze what went wrong, adjust, and keep going',facets:['Self-Discipline','Cautiousness']},
  {type:'n',text:'See <span style="color:var(--trait-c)">Conscientiousness</span> growing? Your evidence fragments are collecting on the canvas. You can click them to see which facets they influenced.',evidence:null,facets:[],radar:{o:60,c:70,e:50,a:50,n:50}},
  {type:'u',text:'This is so much better than a quiz.',evidence:null,facets:[]},
  {type:'n',text:'Right? Let\'s explore social energy. Are you energized or drained by large groups?',evidence:null,facets:[]},
  {type:'u',text:'Drained. I prefer one-on-one conversations.',evidence:'I prefer one-on-one conversations',facets:['Gregariousness','Friendliness']},
  {type:'n',text:'Watch <span style="color:var(--trait-e)">Extraversion</span> settle at a moderate level. Notice how the radar shape is becoming uniquely yours?',evidence:null,facets:[],radar:{o:60,c:70,e:45,a:50,n:50}},
  {type:'u',text:'Yeah, it\'s actually kind of moving to see.',evidence:null,facets:[]},
  {type:'n',text:'That\'s the power of co-creation. You\'re not just taking a test—you\'re building a portrait of yourself. Let\'s keep going...',evidence:null,facets:[]},
];

let currentIndex = 0;
const chat = document.getElementById('chat');
const bubbles = document.getElementById('bubbles').children;
const notes = document.getElementById('notes');

const radarPoints = {
  o:{x:100,y:20,current:50},
  c:{x:175,y:65,current:50},
  e:{x:155,y:155,current:50},
  a:{x:45,y:155,current:50},
  n:{x:25,y:65,current:50}
};

function updateRadar(scores){
  if(!scores) return;
  Object.keys(scores).forEach(trait=>{
    const val = scores[trait];
    radarPoints[trait].current = val;
    const point = document.getElementById(`${trait}-point`);
    const center = {x:100,y:100};
    const target = radarPoints[trait];
    const progress = (val - 50) / 50; // -1 to 1
    const newX = center.x + (target.x - center.x) * (0.5 + progress * 0.5);
    const newY = center.y + (target.y - center.y) * (0.5 + progress * 0.5);
    point.setAttribute('cx', newX);
    point.setAttribute('cy', newY);
  });

  // Update polygon
  const shape = document.getElementById('radarShape');
  const o = document.getElementById('o-point');
  const c = document.getElementById('c-point');
  const e = document.getElementById('e-point');
  const a = document.getElementById('a-point');
  const n = document.getElementById('n-point');
  shape.setAttribute('points',`${o.getAttribute('cx')},${o.getAttribute('cy')} ${c.getAttribute('cx')},${c.getAttribute('cy')} ${e.getAttribute('cx')},${e.getAttribute('cy')} ${a.getAttribute('cx')},${a.getAttribute('cy')} ${n.getAttribute('cx')},${n.getAttribute('cy')}`);
}

function addMessage(msg){
  const div = document.createElement('div');
  div.className = `msg ${msg.type}`;
  div.innerHTML = `
    <div class="av">${msg.type === 'n' ? 'N' : 'Y'}</div>
    <div class="bub">${msg.text}</div>
  `;
  chat.appendChild(div);
  setTimeout(()=>div.classList.add('vis'),50);
  chat.scrollTop = chat.scrollHeight;

  // Update canvas
  if(msg.evidence){
    const note = document.createElement('div');
    note.className = 'note';
    note.innerHTML = `"${msg.evidence}"<div class="note-meta">→ ${msg.facets.join(', ')}</div>`;
    notes.appendChild(note);
  }

  if(msg.facets && msg.facets.length > 0){
    Array.from(bubbles).forEach(b=>{
      if(msg.facets.some(f => b.textContent.includes(f))){
        b.classList.add('active');
      }
    });
  }

  if(msg.radar){
    updateRadar(msg.radar);
  }
}

function nextMessage(){
  if(currentIndex < messages.length){
    addMessage(messages[currentIndex]);
    currentIndex++;
    if(currentIndex < messages.length){
      const delay = messages[currentIndex-1].type === 'u' ? 1800 : 2200;
      setTimeout(nextMessage, delay);
    }
  }
}

// Initialize
updateRadar({o:50,c:50,e:50,a:50,n:50});
nextMessage();
</script>

</body>
</html>
