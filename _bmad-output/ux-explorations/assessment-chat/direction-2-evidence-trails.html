<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Direction 2: Evidence Trails ‚Äî Assessment Chat</title>
<link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&family=DM+Sans:ital,wght@0,400;0,500;0,600;1,400&family=JetBrains+Mono&display=swap" rel="stylesheet">
<style>
*{margin:0;padding:0;box-sizing:border-box}
:root{
  --bg:#FFF8F0;--fg:#1A1A2E;--primary:#FF0080;--secondary:#FF6B2B;
  --tertiary:#00B4A6;--card:#FFF0E8;--muted:#6B6580;--border:#FFD6C4;
  --trait-o:#7B2FBE;--trait-c:#D4722A;--trait-e:#E0307B;--trait-a:#00B4A6;--trait-n:#1A1A5E;
}
body{font-family:'DM Sans',sans-serif;color:var(--fg);background:var(--bg);margin:0;display:grid;grid-template-columns:1fr 320px;height:100vh;overflow:hidden}

/* NAV */
nav{grid-column:1/3;padding:16px 24px;display:flex;justify-content:space-between;align-items:center;background:rgba(255,248,240,.95);border-bottom:1px solid var(--border)}
.logo{font-family:'Space Grotesk',sans-serif;font-weight:700;font-size:1.1rem;display:flex;align-items:center;gap:8px}
.logo .dot{width:9px;height:9px;border-radius:50%;background:var(--primary)}

/* CHAT */
.chat-area{overflow-y:auto;padding:24px;display:flex;flex-direction:column;gap:16px}
.msg{display:flex;gap:11px;opacity:0;transform:translateY(20px);transition:all .5s cubic-bezier(.16,1,.3,1);position:relative}
.msg.vis{opacity:1;transform:translateY(0)}
.msg.n{flex-direction:row}
.msg.u{flex-direction:row-reverse}
.av{width:36px;height:36px;border-radius:50%;flex-shrink:0;display:flex;align-items:center;justify-content:center;font-size:.8rem;font-weight:700;font-family:'Space Grotesk',sans-serif}
.msg.n .av{background:linear-gradient(135deg,var(--tertiary),var(--primary));color:#fff}
.msg.u .av{background:var(--card);border:1px solid var(--border)}
.bub{padding:16px 20px;border-radius:16px;max-width:85%;font-size:.92rem;line-height:1.65;background:var(--card);border:1px solid var(--border)}
.msg.n .bub{border-bottom-left-radius:5px}
.msg.u .bub{background:linear-gradient(120deg,var(--primary),var(--secondary));color:#fff;border:none;border-bottom-right-radius:5px}

/* EVIDENCE CARD */
.evidence-card{margin-top:12px;padding:14px;background:rgba(255,255,255,.5);border:1px solid var(--border);border-radius:10px;font-size:.85rem}
.evidence-card h4{font-family:'Space Grotesk',sans-serif;font-size:.8rem;margin-bottom:10px;color:var(--muted)}
.facet-row{display:flex;align-items:center;gap:8px;margin-bottom:6px}
.facet-bar{height:5px;border-radius:3px;background:rgba(0,0,0,.06);flex:1;overflow:hidden}
.facet-fill{height:100%;border-radius:3px;transition:width .5s ease}

/* CONSTELLATION SIDEBAR */
.constellation{background:linear-gradient(180deg,#FFF8F0,#FFF0E8);border-left:1px solid var(--border);padding:24px 16px;overflow-y:auto;position:relative}
.constellation h3{font-family:'Space Grotesk',sans-serif;font-size:.85rem;margin-bottom:16px;color:var(--muted);text-align:center}
.constellation-svg{width:100%;height:500px}
.facet-node{cursor:pointer;transition:all .3s}
.facet-node:hover circle{stroke-width:3px}
.facet-label{font-family:'JetBrains Mono',monospace;font-size:7px;fill:var(--muted);pointer-events:none}

/* TRAIT GROUPS */
.trait-group{margin-bottom:20px}
.trait-group h4{font-family:'Space Grotesk',sans-serif;font-size:.75rem;font-weight:600;margin-bottom:8px;display:flex;align-items:center;gap:6px}
.trait-dot{width:8px;height:8px;border-radius:50%}
.facet-list{display:flex;flex-direction:column;gap:4px;padding-left:14px}
.facet-item{font-size:.7rem;color:var(--muted);display:flex;align-items:center;gap:6px}
.facet-confidence{height:4px;width:40px;background:rgba(0,0,0,.06);border-radius:2px;overflow:hidden}
.facet-confidence-fill{height:100%;border-radius:2px}

/* THREADS (animated lines) */
.thread{position:absolute;pointer-events:none;z-index:1}
.thread line{stroke:var(--primary);stroke-width:1.5;opacity:.3;stroke-dasharray:5,5;animation:dash 20s linear infinite}
@keyframes dash{to{stroke-dashoffset:-1000}}

/* INPUT */
.chat-input-bar{grid-column:1;padding:16px;background:rgba(255,248,240,.95);border-top:1px solid var(--border);display:flex;gap:10px}
.chat-input{flex:1;padding:12px 18px;border-radius:10px;border:1px solid var(--border);background:#fff;font-family:'DM Sans',sans-serif;font-size:.9rem;outline:none}
.send-btn{background:linear-gradient(120deg,var(--primary),var(--secondary));color:#fff;border:none;padding:12px 24px;border-radius:10px;font-family:'Space Grotesk',sans-serif;font-weight:600;cursor:pointer}

@media(max-width:1024px){
  body{grid-template-columns:1fr;grid-template-rows:auto 1fr auto}
  .constellation{display:none}
  .chat-input-bar{grid-column:1;grid-row:3}
}
</style>
</head>
<body>

<nav>
  <div class="logo"><span class="dot"></span> Big Ocean</div>
  <div style="font-family:'JetBrains Mono',monospace;font-size:.7rem;color:var(--muted)">EVIDENCE TRACKING: <span id="evidenceCount">0</span> facets mapped</div>
</nav>

<div class="chat-area" id="chat">
  <!-- Messages added by JS -->
</div>

<div class="constellation">
  <h3>Facet Constellation</h3>
  <div class="trait-group">
    <h4><span class="trait-dot" style="background:var(--trait-o)"></span> Openness</h4>
    <div class="facet-list">
      <div class="facet-item">Imagination <div class="facet-confidence"><div class="facet-confidence-fill" id="o1" style="width:0%;background:var(--trait-o)"></div></div></div>
      <div class="facet-item">Artistic <div class="facet-confidence"><div class="facet-confidence-fill" id="o2" style="width:0%;background:var(--trait-o)"></div></div></div>
      <div class="facet-item">Emotionality <div class="facet-confidence"><div class="facet-confidence-fill" id="o3" style="width:0%;background:var(--trait-o)"></div></div></div>
      <div class="facet-item">Adventure <div class="facet-confidence"><div class="facet-confidence-fill" id="o4" style="width:0%;background:var(--trait-o)"></div></div></div>
      <div class="facet-item">Intellect <div class="facet-confidence"><div class="facet-confidence-fill" id="o5" style="width:0%;background:var(--trait-o)"></div></div></div>
      <div class="facet-item">Liberalism <div class="facet-confidence"><div class="facet-confidence-fill" id="o6" style="width:0%;background:var(--trait-o)"></div></div></div>
    </div>
  </div>
  <div class="trait-group">
    <h4><span class="trait-dot" style="background:var(--trait-c)"></span> Conscientiousness</h4>
    <div class="facet-list">
      <div class="facet-item">Self-Efficacy <div class="facet-confidence"><div class="facet-confidence-fill" id="c1" style="width:0%;background:var(--trait-c)"></div></div></div>
      <div class="facet-item">Orderliness <div class="facet-confidence"><div class="facet-confidence-fill" id="c2" style="width:0%;background:var(--trait-c)"></div></div></div>
      <div class="facet-item">Dutifulness <div class="facet-confidence"><div class="facet-confidence-fill" id="c3" style="width:0%;background:var(--trait-c)"></div></div></div>
      <div class="facet-item">Achievement <div class="facet-confidence"><div class="facet-confidence-fill" id="c4" style="width:0%;background:var(--trait-c)"></div></div></div>
      <div class="facet-item">Self-Discipline <div class="facet-confidence"><div class="facet-confidence-fill" id="c5" style="width:0%;background:var(--trait-c)"></div></div></div>
      <div class="facet-item">Cautiousness <div class="facet-confidence"><div class="facet-confidence-fill" id="c6" style="width:0%;background:var(--trait-c)"></div></div></div>
    </div>
  </div>
  <div class="trait-group">
    <h4><span class="trait-dot" style="background:var(--trait-e)"></span> Extraversion</h4>
    <div class="facet-list">
      <div class="facet-item">Friendliness <div class="facet-confidence"><div class="facet-confidence-fill" id="e1" style="width:0%;background:var(--trait-e)"></div></div></div>
      <div class="facet-item">Gregariousness <div class="facet-confidence"><div class="facet-confidence-fill" id="e2" style="width:0%;background:var(--trait-e)"></div></div></div>
      <div class="facet-item">Assertiveness <div class="facet-confidence"><div class="facet-confidence-fill" id="e3" style="width:0%;background:var(--trait-e)"></div></div></div>
      <div class="facet-item">Activity Level <div class="facet-confidence"><div class="facet-confidence-fill" id="e4" style="width:0%;background:var(--trait-e)"></div></div></div>
      <div class="facet-item">Excitement <div class="facet-confidence"><div class="facet-confidence-fill" id="e5" style="width:0%;background:var(--trait-e)"></div></div></div>
      <div class="facet-item">Cheerfulness <div class="facet-confidence"><div class="facet-confidence-fill" id="e6" style="width:0%;background:var(--trait-e)"></div></div></div>
    </div>
  </div>
</div>

<div class="chat-input-bar">
  <input type="text" class="chat-input" placeholder="Type your response...">
  <button class="send-btn">Send</button>
</div>

<script>
const messages = [
  {type:'n',text:'Hi! I\'m Nerin. As we talk, watch the facet constellation on the right‚Äîit shows what I\'m learning about you in real-time.',facets:[]},
  {type:'u',text:'Cool! How does this work?',facets:[]},
  {type:'n',text:'Every time you share something, I connect your words to personality facets. Let\'s start: Tell me about a creative project you\'re proud of.',facets:[]},
  {type:'u',text:'I designed a mobile app that helps people track their mood patterns.',facets:['o2','o5','c1']},
  {type:'n',text:'Beautiful <span style="color:var(--trait-o)">‚óè</span> <span style="color:var(--trait-c)">‚óè</span>. I\'m seeing evidence for <strong>Artistic Interests</strong>, <strong>Intellect</strong>, and <strong>Self-Efficacy</strong>. Notice how those facets are lighting up?<div class="evidence-card"><h4>Evidence Collected:</h4><div class="facet-row">üé® Artistic <div class="facet-bar"><div class="facet-fill" style="width:70%;background:var(--trait-o)"></div></div> 70%</div><div class="facet-row">üß† Intellect <div class="facet-bar"><div class="facet-fill" style="width:65%;background:var(--trait-o)"></div></div> 65%</div><div class="facet-row">üí™ Self-Efficacy <div class="facet-bar"><div class="facet-fill" style="width:68%;background:var(--trait-c)"></div></div> 68%</div></div>',facets:[]},
  {type:'u',text:'Wow, that\'s already pretty accurate!',facets:[]},
  {type:'n',text:'Let\'s dig deeper. How do you handle setbacks in projects like that?',facets:[]},
  {type:'u',text:'I analyze what went wrong, adjust my approach, and keep going. Giving up isn\'t in my vocabulary.',facets:['c1','c5','c6']},
  {type:'n',text:'Strong <span style="color:var(--trait-c)">‚óè</span> patterns emerging. Notice <strong>Self-Discipline</strong> and <strong>Cautiousness</strong> filling in?',facets:[]},
  {type:'u',text:'This is fascinating to watch.',facets:[]},
  {type:'n',text:'Now let\'s explore social energy. Are you the first person to speak up in group settings?',facets:[]},
  {type:'u',text:'Not usually. I prefer to listen first, then contribute thoughtfully.',facets:['e3','a2','a5']},
  {type:'n',text:'See those <span style="color:var(--trait-e)">‚óè</span> <span style="color:var(--trait-a)">‚óè</span> connections? <strong>Assertiveness</strong> (moderate), <strong>Modesty</strong>, and <strong>Cooperation</strong> lighting up.<div class="evidence-card"><h4>New Evidence:</h4><div class="facet-row">üí¨ Assertiveness <div class="facet-bar"><div class="facet-fill" style="width:45%;background:var(--trait-e)"></div></div> 45%</div><div class="facet-row">ü§ù Modesty <div class="facet-bar"><div class="facet-fill" style="width:72%;background:var(--trait-a)"></div></div> 72%</div></div>',facets:[]},
];

let currentIndex = 0;
const chat = document.getElementById('chat');
const evidenceCount = document.getElementById('evidenceCount');
let mappedFacets = new Set();

function updateFacet(id,value){
  const el = document.getElementById(id);
  if(el){
    el.style.width = `${value}%`;
    mappedFacets.add(id);
    evidenceCount.textContent = mappedFacets.size;
  }
}

function addMessage(msg){
  const div = document.createElement('div');
  div.className = `msg ${msg.type}`;
  div.innerHTML = `
    <div class="av">${msg.type === 'n' ? 'N' : 'Y'}</div>
    <div class="bub">${msg.text}</div>
  `;
  chat.appendChild(div);
  setTimeout(()=>div.classList.add('vis'),50);
  chat.scrollTop = chat.scrollHeight;

  // Update facets
  if(msg.facets && msg.facets.length > 0){
    setTimeout(()=>{
      msg.facets.forEach(f => updateFacet(f, 50 + Math.random()*40));
    },600);
  }
}

function nextMessage(){
  if(currentIndex < messages.length){
    addMessage(messages[currentIndex]);
    currentIndex++;
    if(currentIndex < messages.length){
      const delay = messages[currentIndex-1].type === 'u' ? 1800 : 2200;
      setTimeout(nextMessage, delay);
    }
  }
}

nextMessage();
</script>

</body>
</html>
